---
import "/src/animacionborderhead/animacionborderhead.css";
---

<header class="sticky top-0 z-50 w-full bg-zinc-900/70 supports-[backdrop-filter]:bg-zinc-900/50 backdrop-blur">
  <div class="mx-auto max-w-[1120px] px-4 py-5 flex justify-center items-center">
    <nav
      class="relative flex items-center gap-8 overflow-hidden rounded-full border border-white/10
             bg-black/40 px-3 py-1 backdrop-blur-2xl animate-border-animation">

      <a
        href="/#top"
        data-target="top"
        class="nav-link rounded-full px-4 py-1 text-sm font-medium transition hover:text-violet-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/60">
        Home
      </a>

      <!-- Pon esto al principio del <body> en layout -->
<a href="#about" class="sr-only focus:not-sr-only focus:fixed focus:top-3 focus:left-3
   focus:bg-violet-600 focus:text-white focus:rounded-md focus:px-3 focus:py-2">
  Skip to content
</a>


      <a
        href="/#projects"
        data-target="projects"
        class="nav-link rounded-full px-4 py-1 text-sm font-medium transition hover:text-violet-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/60">
        Projects
      </a>

      <a
        href="mailto:williamarosado@gmail.com"
        class="rounded-full px-4 py-1 text-sm font-medium transition hover:text-violet-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-violet-500/60">
        Contact
      </a>
    </nav>
  </div>
</header>

<style is:global>
  html { scroll-behavior: smooth; }
  section[id] { scroll-margin-top: 90px; }

  .nav-link { color: rgb(229 231 235 / 0.8); }
  .nav-link.active { color: rgb(167 139 250); }
</style>

<script is:inline>
  window.addEventListener('DOMContentLoaded', () => {
    const links = Array.from(document.querySelectorAll('.nav-link[data-target]'));
    const sections = links
      .map(link => document.getElementById(link.dataset.target))
      .filter(Boolean);

    if (!links.length || !sections.length) return;

 // En tu setActive() del header
function setActive(id) {
  links.forEach(link => {
    const isActive = link.dataset.target === id;
    link.classList.toggle('active', isActive);
    link.setAttribute('aria-current', isActive ? 'page' : 'false');
  });
}

    function updateActive() {
      const y = window.scrollY;

      // ðŸ‘‡ Si estÃ¡ arriba del todo => Home activo
      if (y < 150) {
        setActive("top");
        return;
      }

      const center = y + window.innerHeight / 2;
      let current = sections[0].id;

      for (const sec of sections) {
        const top = sec.offsetTop;
        const bottom = top + sec.offsetHeight;
        if (center >= top && center < bottom) {
          current = sec.id;
          break;
        }
      }

      setActive(current);
    }

    updateActive();
    const rafUpdate = () => requestAnimationFrame(updateActive);
    window.addEventListener('scroll', rafUpdate, { passive: true });
    window.addEventListener('resize', rafUpdate);
    window.addEventListener('hashchange', updateActive);
  });
</script>
